### 一、SYN Flood攻击
#### 1.1 什么是syn flood攻击？
SYN flood（半开连接攻击）是一种拒绝服务 (DDoS) 攻击，旨在耗尽可用服务器资源，致使服务器无法传输合法流量。通过重复发送初始连接请求 (SYN) 数据包，攻击者将可击垮目标服务器计算机上的所有可用端口，导致目标设备在响应合法流量时表现迟钝乃至全无响应。

#### 1.2 SYN Flood攻击如何工作
SYN 洪水攻击利用 TCP 连接的握手过程发动攻击。正常情况下，TCP 连接将完成三次握手以建立连接。

1. 首先，客户端向服务器发送 SYN 数据包以发起连接。
2. 接着，服务器通过 SYN/ACK 数据包对该初始数据包做出响应，以便确认通信。
3. 最后，客户端返回 ACK 数据包以确认接到服务器发出的数据包。完成这一系列数据包发送和接收操作后，TCP 连接将处于打开状态并且能够发送和接收数据。

为发起拒绝服务攻击，攻击者需要利用这样一项事实：收到初始化 SYN 数据包后，服务器将通过一个或多个 SYN/ACK 数据包做出回应，等待完成握手过程的最后一步，工作方式如下所示：
1. 攻击者通常使用伪造的IP地址向目标服务器发送大量SYN数据包；
2. 服务器分别对每一项连接请求作出响应，并确保打开的端口做好接收响应的准备
3. 在服务器等待最后一个ACK数据包的过程中，攻击者将继续发送更多SYN数据包。每当有新的 SYN 数据包到达，服务器都会临时打开一个新的端口并在一段特定时间内保持连接；用遍所有可用端口后，服务器将无法正常运行。

#### 1.3 如何缓解SYN Flood攻击
SYN Flood攻击早已为人所致，并且开创了大量的解决办法，如下所示：
1. 扩展积压工作队列

    目标设备安装的每个操作系统都允许具有一定数量的半开连接。若要响应大量 SYN 数据包，一种方法是增加操作系统允许的最大半开连接数目。为成功扩展最大积压工作，系统必须额外预留内存资源以处理各类新请求。如果系统没有足够的内存，无法应对增加的积压工作队列规模，将对系统性能产生负面影响，但仍然好过拒绝服务。

2. 回收最先创建的 TCP 半开连接

    另一种缓解策略是在填充积压工作后覆盖最先创建的半开连接。这项策略要求完全建立合法连接的时间低于恶意 SYN 数据包填充积压工作的时间。当攻击量增加或积压工作规模小于实际需求时，这项特定的防御措施将不奏效。

3. SYN Cookie

    此策略要求服务器创建 Cookie。为避免在填充积压工作时断开连接，服务器使用 SYN-ACK 数据包响应每一项连接请求，而后从积压工作中删除 SYN 请求，同时从内存中删除请求，保证端口保持打开状态并做好重新建立连接的准备。

更多参考：[SYN Flood](https://www.cloudflare.com/zh-cn/learning/ddos/syn-flood-ddos-attack/)